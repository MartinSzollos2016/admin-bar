<?php

declare(strict_types=1);

namespace Baraja\AdminBar;

/**
 * @var MenuLink[]|null[] $menuLinks
 * @var string $basePath
 * @var User|null $user
 * @var Panel[] $panels
 */

?>
<div id="admin-bar-container">
	<table>
		<tr>
			<td id="admin-bar-logo" role="banner">
				<span>CMS</span>
			</td>
			<td>
				<ul class="admin-bar-tab-area">
					<?php
					foreach ($panels as $panel) {
						echo '<li class="admin-bar-tab">' . $panel->getTab() . '</li>';
					}
					?>
				</ul>
			</td>
			<td class="admin-bar-user" width="200" role="navigation">
				<span class="admin-bar-identity text-nowrap">
				<?php
				echo Helpers::escapeHtml($user !== null ? ($user->getName() ?? 'Guest') : 'Guest');
				echo ($user !== null ? '&nbsp;<i class="admin-bar-dropdown-toggle"></i>' : '')
				?>
				</span>
				<ul>
					<?php
					if ($user !== null) {
						echo '<li class="text-left"><a href="' . $basePath . '/admin" class="ml-2">Dashboard</a></li>';
						echo '<hr class="w-100 my-2">';
					}

		  		foreach ($menuLinks as $menuLink) {
		  			if ($menuLink === null) {
							echo '<hr class="w-100 my-2">';
						} else {
							echo '<li class="text-left">';
							echo '<a href="' . $menuLink->getUrl() . '" class="ml-2">' . Helpers::escapeHtml($menuLink->getLabel()) . '</a>';
							echo '</li>';
						}
					}
					?>
				</ul>
			</td>
		</tr>
	</table>
</div>
